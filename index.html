function shuffle(a){
return [...a].sort(()=>Math.random()-0.5);
}

function q(question,answers,correct){
let correctAnswer=answers[correct];
let shuffled=shuffle(answers);
return {q:question,a:shuffled,correct:shuffled.indexOf(correctAnswer)};
}

let variants={

1:[

q("Уголь имеет коэффициент крепости f=3. Определите группу пород",
["мягкие породы","полускальные породы","скальные породы","сыпучие породы"],1),

q("Уголь имеет угол падения 5°. Определите тип залежи",
["пологая залежь","наклонная залежь","крутонаклонная залежь","крутая залежь"],0),

q("Коэффициент вскрыши это:",
[
"отношение объема вскрышных пород к объему полезного ископаемого",
"отношение объема полезного ископаемого к вскрыше",
"отношение длины карьера к ширине",
"отношение высоты уступа к ширине"
],0),

q("Подготовительный период включает:",
[
"подготовку месторождения к разработке",
"добычные работы",
"ликвидацию карьера",
"рекультивацию"
],0),

q("Эксплуатационный период включает:",
[
"вскрышные и добычные работы",
"подготовительные работы",
"ликвидацию",
"проектирование"
],0),

q("Траншея предназначена для:",
[
"вскрытия месторождения",
"складирования пород",
"размещения техники",
"размещения транспорта"
],0),

q("Уступ представляет собой:",
[
"ступенчатую часть карьера",
"часть отвала",
"дно карьера",
"часть транспорта"
],0),

q("Проектные кондиции определяются:",
[
"при проектировании",
"при эксплуатации",
"при разведке",
"при ликвидации"
],0),

q("Основной объект разработки:",
[
"залежь полезного ископаемого",
"уступ карьера",
"отвал",
"транспорт"
],0),

q("Транспорт используется для:",
[
"перемещения горной массы",
"разрушения массива",
"бурения",
"дренажа"
],0)

]

};

for(let i=2;i<=12;i++){
variants[i]=variants[1];
}

let questions=[];
let index=0;
let score=0;
let variant=0;
let student="";
let startTime;

function startTest(){

student=document.getElementById("name").value;

if(student.trim()==""){
alert("Введите ФИО");
return;
}

variant=Math.floor(Math.random()*12)+1;

questions=variants[variant];

document.getElementById("variant").innerHTML="Ваш вариант: "+variant;

index=0;
score=0;

showQuestion();

}

function showQuestion(){

if(index>=questions.length){
finishTest();
return;
}

let q=questions[index];

let html="<div class='card'>"+
"<div class='score'>Баллы: "+score+"/100</div>"+
"<h3>Вопрос "+(index+1)+" из 10</h3>"+
"<p>"+q.q+"</p>";

q.a.forEach((a,i)=>{
html+="<button onclick='answer("+i+")'>"+a+"</button>";
});

html+="</div>";

document.getElementById("quiz").innerHTML=html;

}

function answer(i){

if(i==questions[index].correct) score+=10;

index++;

showQuestion();

}

function finishTest(){

document.getElementById("quiz").innerHTML=
"<div class='card'><h2>Баллы: "+score+"/100</h2></div>";

}
